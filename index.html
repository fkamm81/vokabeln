<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#3a86ff" />
  <title>Vokabelhelden – Latein & Englisch</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
<div id="app">
  <header>
    <div class="brand">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3 7h7l-5.7 4.1L18.9 21 12 16.9 5.1 21l2.6-7.9L2 9h7z"/></svg>
      <div>Vokabelhelden</div>
    </div>
    <div class="kpis">
      <div class="kpi"><span id="xp">0</span> XP</div>
      <div class="kpi">🔥 <span id="streak">0</span></div>
      <div class="kpi" id="kidBadge">👧👦</div>
    </div>
  </header>

  <main>
    <div class="panel grid" id="topbar">
      <div id="filtersToggle">
        <div><strong>Filter</strong></div>
        <button id="btnFilters" class="smallbtn">Einblenden</button>
      </div>
      <div id="filters">
        <div class="controls">
          <select id="bookSelect" title="Buch"></select>
          <select id="langSelect" title="Übungsrichtung"></select>
          <select id="lessonSelect" multiple size="1" title="Lektionen"></select>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="tabs" id="tabs">
        <div class="tab active" data-tab="flash">Flashcards</div>
        <div class="tab" data-tab="quiz">Quiz</div>
        <div class="tab" data-tab="listen">Hören</div>
        <div class="tab" data-tab="speak">Sprechen</div>
        <div class="tab" data-tab="match">Zuordnen</div>
        <div class="tab" data-tab="write">Schreiben</div>
      </div>

      <section class="activity" id="flash">
        <div class="card big" id="flashCard">Importiere Daten im Elternbereich und wähle Buch & Lektionen.</div>
        <div class="actions">
          <button id="btnShow" class="wide">Auflösung zeigen</button>
          <button id="btnEasy" class="hidden">Leicht ✅</button>
          <button id="btnGood" class="hidden">Gut 🙂</button>
          <button id="btnHard" class="hidden">Schwer 🤔</button>
        </div>
        <div class="hint">Spaced Repetition aktiv. Nächste Fälligkeit wird gespeichert.</div>
      </section>

      <section class="activity hidden" id="quiz">
        <div class="card big" id="quizPrompt">–</div>
        <div class="actions" id="quizOptions"></div>
      </section>

      <section class="activity hidden" id="listen">
        <div class="card big" id="listenPrompt">🎧 Höre zu und übersetze…</div>
        <input id="listenInput" type="text" placeholder="Antwort tippen…">
        <div class="actions">
          <button id="btnSpeak">Nochmal anhören 🔊</button>
          <button id="btnCheckListen" class="wide">Prüfen</button>
        </div>
      </section>

      <section class="activity hidden" id="speak">
        <div class="card big" id="speakPrompt">🎙️ Sprich die Übersetzung. (Falls Mikro nicht unterstützt, nutze Selbstkontrolle.)</div>
        <div class="actions">
          <button id="btnStartRec">Aufnahme starten</button>
          <button id="btnStopRec" class="secondary">Stop</button>
          <button id="btnSelfOk" class="wide">Ich hab's richtig ✅</button>
        </div>
        <div class="hint" id="recOut"></div>
      </section>

      <section class="activity hidden" id="match">
        <div class="card big" id="matchGrid">Tippe jeweils Begriff ↔ Bedeutung an.</div>
      </section>

      <section class="activity hidden" id="write">
        <div class="card big" id="writeCard"><div id="writePrompt">Was bedeutet …?</div><div id="writeFeedback" class="hint"></div></div>
        <input id="writeInput" type="text" placeholder="Antwort">
        <div class="actions">
          <button id="btnCheckWrite" class="wide">Prüfen</button>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div>📱 Als App installieren</div>
    <div style="display:flex; gap:8px;">
      <button id="btnTheme" class="smallbtn iconbtn" title="Theme">🎨</button>
      <button id="btnParent" class="smallbtn iconbtn" title="Elternbereich">👨‍👧‍👦</button>
    </div>
  </footer>
</div>

<!-- Elternbereich Modal -->
<div id="parentModal" class="modal hidden" aria-modal="true" role="dialog">
  <div class="box">
    <div class="big">Elternbereich</div>
    <div class="row">
      <label>Aktives Kind:
        <select id="kidSelect"></select>
      </label>
      <button id="btnAddKid">Kind hinzufügen</button>
    </div>
    <div class="row">
      <div class="panel" style="flex:1">
        <div class="big">Import</div>
        <div class="row">
          <input id="bookName" type="text" placeholder="Buchtitel (z.B. Adeamus 1)">
          <select id="baseLang">
            <option value="latin">Buchsprache: Latein</option>
            <option value="english">Buchsprache: Englisch</option>
          </select>
        </div>
        <div class="row">
          <input id="fileInput" type="file" accept=".csv,.json">
          <button id="btnImport" class="smallbtn">Importieren</button>
        </div>
        <div id="importStatus" class="hint"></div>
        <div class="hint">Jeder Import wird mit Buch & Sprache getaggt. Lektionen werden automatisch erkannt.</div>
      </div>
      <div class="panel" style="flex:1">
        <div class="big">Tägliches Ziel</div>
        <div class="row">
          <label>Lektionen (kommasep.): <input id="goalLessons" type="text" placeholder="z.B. 1,2"></label>
          <label>Minuten: <input id="goalMinutes" type="number" min="5" step="5" value="15"></label>
          <label class="switch"><input id="reminders" type="checkbox"> Tägliche Erinnerung 17:00</label>
        </div>
        <button id="btnSaveGoal">Speichern</button>
        <div class="hint">Ziel gilt pro Tag und pro Kind.</div>
      </div>
    </div>
    <div class="panel">
      <div class="big">Fortschritt</div>
      <div id="progressList" class="list"></div>
    </div>
    <div class="row" style="justify-content:flex-end">
      <button id="btnCloseParent">Schließen</button>
    </div>
  </div>
</div>

<!-- Theme mini popup -->
<div id="themePopup" class="hidden">
  <div class="theme-mini" id="themeDots"></div>
</div>

<script src="app.js"></script>
<script> if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); } </script>
</body>
</html>
