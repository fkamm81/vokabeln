
:root{
  --bg:#0b132b; --panel:#1c2541; --accent:#3a86ff; --accent-2:#ffbe0b;
  --ok:#2ec4b6; --warn:#ff595e; --text:#f6f7fb; --muted:#b6c2e0;
  --radius:18px; --gap:12px; --tap:56px; --shadow:0 8px 24px rgba(0,0,0,.25);
  --font: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
}
*{box-sizing:border-box; touch-action:manipulation;}
html,body{height:100%;}
body{margin:0; background:linear-gradient(180deg,var(--bg),#0e1a39); color:var(--text); font-family:var(--font); -webkit-font-smoothing:antialiased;}
.no-scroll{overflow:hidden; height:100vh;}
#app{display:grid; grid-template-rows:auto 1fr auto; height:100svh; max-width:820px; margin:0 auto;}
header, footer{padding:12px 16px;}
header{display:flex; align-items:center; justify-content:space-between;}
.brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px}
.brand svg{width:28px; height:28px}
.kpis{display:flex; gap:10px;}
.kpi{background:var(--panel); border-radius:999px; padding:8px 12px; font-size:14px; display:flex; gap:8px; align-items:center; box-shadow:var(--shadow)}
.kpi span{font-weight:700}
main{padding:12px 16px; display:grid; grid-template-rows:auto 1fr; gap:var(--gap);}
.panel{background:var(--panel); border-radius:var(--radius); padding:12px; box-shadow:var(--shadow);}
.controls{display:flex; gap:10px; flex-wrap:wrap}
select, button, input[type="text"], input[type="number"]{
  background:#0d1b2a; color:var(--text); border:none; border-radius:14px; padding:12px 14px;
  min-height:var(--tap); font-size:16px; outline:none;
}
button{background:var(--accent); font-weight:800}
button.secondary{background:#243b63}
button.ghost{background:transparent; border:2px solid #243b63}
button:active{transform:translateY(1px)}
.grid{display:grid; gap:var(--gap);}
.activity{display:grid; gap:12px; margin-top:8px;}
.card{background:#0d1b2a; border-radius:16px; padding:18px; text-align:center; min-height:160px; display:grid; place-items:center;}
.big{font-size:clamp(20px,4.5vw,28px);}
.actions{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.actions .wide{grid-column:1/-1}
#flash .actions{grid-template-columns:repeat(3,1fr)}
.badge{background:var(--accent-2); color:#16213e; padding:6px 10px; border-radius:999px; font-weight:800; display:inline-grid; place-items:center}
.hint{color:var(--muted); font-size:14px}
.tabs{display:flex; gap:6px; flex-wrap:wrap; margin-bottom:8px;}
.tab{padding:8px 12px; border-radius:12px; background:#0d1b2a; cursor:pointer}
.tab.active{background:var(--accent); color:#001030; font-weight:800}
.toast{position:fixed; inset:10px 0 auto 0; display:grid; place-items:center; pointer-events:none; z-index:99}
.toast .msg{background:#081427; border:2px solid #29436e; padding:12px 16px; border-radius:14px; display:flex; gap:10px; align-items:center}
.msg svg{width:28px; height:28px}
.list{max-height:40vh; overflow:auto; padding-right:6px}
label.switch{display:inline-flex; align-items:center; gap:8px; background:#0d1b2a; padding:8px 12px; border-radius:999px}
input[type="checkbox"]{width:22px; height:22px}
footer{display:flex; gap:12px; flex-wrap:wrap; justify-content:space-between; align-items:center; font-size:14px; color:var(--muted)}
footer .smallbtn{background:#0d1b2a; border:1px solid #29436e; border-radius:12px; padding:8px 10px; min-height:auto; font-size:14px}
footer .iconbtn{width:42px; height:42px; display:grid; place-items:center; border-radius:12px}
.hidden{display:none !important}

/* Feedback states */
button.ok, .ok{outline:3px solid var(--ok)}
button.bad, .bad{outline:3px solid var(--warn)}

/* Selected (match left) - strong white border + subtle bg */
.selected{outline:3px solid #ffffff; background:#0b1730;}

/* Modal */
.modal{position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.4); z-index:100}
.modal > .box{background:var(--panel); border-radius:18px; padding:16px; width:min(96vw,520px); max-height:90vh; overflow:auto; box-shadow:var(--shadow)}
.modal .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}

/* Theme mini popup */
#themePopup{position:fixed; bottom:64px; right:16px; background:var(--panel); border-radius:14px; padding:10px; box-shadow:var(--shadow); z-index:110}
.theme-mini{display:flex; gap:8px}
.theme-dot{width:28px; height:28px; border-radius:50%; border:2px solid #0002; cursor:pointer}
.theme-dot.active{outline:3px solid var(--accent);}

/* Filter collapse */
#filtersToggle{display:flex; justify-content:space-between; align-items:center}
#filters{display:none}
#filters.open{display:block}
#writeFeedback{font-size:18px}
